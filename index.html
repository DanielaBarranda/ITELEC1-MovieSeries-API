<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cinemax | Movie Details</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="nav-inner">
      <div class="logo">
        <span class="logo-emoji">🎬</span>
        Cinemax
      </div>

      <div class="nav-links">
        <a href="#" class="active">Home</a>
        <a href="#">Discover</a>
        <a href="#">About</a>
      </div>

      <div class="search-container">
        <button class="search-btn"><i class="fas fa-search"></i></button>
        <input type="text" class="search-input" placeholder="Search movies..." />
      </div>
    </div>
  </nav>

  
  <section class="page">
    <div class="page-inner">

      <button class="back-btn"><i class="fas fa-arrow-left"></i></button>

      <div class="detail-grid">
        <div class="poster-col">
          <img id="poster" src="https://via.placeholder.com/260x390?text=Movie+Poster" alt="Movie Poster">
        </div>

        <div class="content-col">
          <div class="title-row">
            <h1 id="title">No movie selected.</h1>
            <p class="meta" id="original-title">Original title: N/A</p>
            <p class="meta small" id="meta">Year · Rating · Runtime</p>
          </div>

          <div class="trailer-wrapper">
            <div class="trailer-card">
              <div class="trailer-top-right"><i class="fas fa-ellipsis-h"></i></div>
              <button class="play-btn"><i class="fas fa-play"></i></button>
              <button class="fullscreen-btn"><i class="fas fa-expand"></i></button>
            </div>
          </div>

          <div class="tags" id="genre-tags">
            <span>Action</span><span>Adventure</span><span>Fantasy</span>
          </div>

          <div class="description">
            <div class="desc-box">
              <p id="plot">Movie description will appear here.</p>
              <hr>
              <p><strong>Director</strong><br><span id="director">N/A</span></p>
              <p><strong>Cast</strong><br><span id="cast">N/A</span></p>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <!-- ✅ OMDb API Script -->
  <script>
    const apiKey = "YOUR_OMDB_API_KEY"; // ← replace this with your actual OMDb API key

    async function fetchMovie(title) {
      try {
        const response = await fetch(`https://www.omdbapi.com/?t=${encodeURIComponent(title)}&apikey=${apiKey}`);
        const data = await response.json();

        if (data.Response === "True") {
          document.getElementById("poster").src = data.Poster !== "N/A" ? data.Poster : "https://via.placeholder.com/260x390?text=No+Image";
          document.getElementById("title").textContent = data.Title;
          document.getElementById("original-title").textContent = `Original title: ${data.Title}`;
          document.getElementById("meta").textContent = `${data.Year} · ${data.Rated} · ${data.Runtime}`;
          document.getElementById("plot").textContent = data.Plot || "No description available.";
          document.getElementById("director").textContent = data.Director || "N/A";
          document.getElementById("cast").textContent = data.Actors || "N/A";

          // Update tags (genre)
          const genres = data.Genre ? data.Genre.split(",") : [];
          const tagsContainer = document.getElementById("genre-tags");
          tagsContainer.innerHTML = "";
          genres.forEach(g => {
            const tag = document.createElement("span");
            tag.textContent = g.trim();
            tagsContainer.appendChild(tag);
          });
        } else {
          document.getElementById("title").textContent = "Movie not found.";
          document.getElementById("plot").textContent = "Please search for another movie.";
        }
      } catch (error) {
        console.error("Error fetching movie:", error);
      }
    }

    // 🔍 Search bar functionality
    const searchBtn = document.querySelector(".search-btn");
    const searchInput = document.querySelector(".search-input");

    searchBtn.addEventListener("click", () => {
      const title = searchInput.value.trim();
      if (title) fetchMovie(title);
    });

    searchInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        const title = searchInput.value.trim();
        if (title) fetchMovie(title);
      }
    });

    // 🧭 Optionally fetch from URL ?title=Inception
    const urlParams = new URLSearchParams(window.location.search);
    const movieTitle = urlParams.get("title");
    if (movieTitle) fetchMovie(movieTitle);
  </script>

</body>
</html>
